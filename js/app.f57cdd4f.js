(function(){"use strict";var t={1649:function(t,e,o){var n=o(9242),r=o(3396);function s(t,e,o,n,s,a){const i=(0,r.up)("Navbar"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r.Wm)(l)],64)}const a=(0,r._)("h1",null,"Dojo Blog",-1);function i(t,e,o,n,s,i){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("header",null,[a,(0,r._)("nav",null,[(0,r.Wm)(l,{to:{name:"home"}},{default:(0,r.w5)((()=>[(0,r.Uk)("Home")])),_:1}),(0,r.Wm)(l,{to:{name:"Create"}},{default:(0,r.w5)((()=>[(0,r.Uk)("Create posts")])),_:1})])])}var l={},u=o(89);const p=(0,u.Z)(l,[["render",i]]);var c=p,d={components:{Navbar:c}};const g=(0,u.Z)(d,[["render",s]]);var v=g,f=o(2483),m=o(7139);const w={class:"home"},y={key:0},h={key:1,class:"layout"},b={key:2};function D(t,e,o,n,s,a){const i=(0,r.up)("PostList"),l=(0,r.up)("TagCloud"),u=(0,r.up)("Spinner");return(0,r.wg)(),(0,r.iD)("div",w,[n.error?((0,r.wg)(),(0,r.iD)("div",y,(0,m.zw)(n.error),1)):(0,r.kq)("",!0),n.posts.length?((0,r.wg)(),(0,r.iD)("div",h,[(0,r.Wm)(i,{posts:n.posts},null,8,["posts"]),(0,r.Wm)(l,{posts:n.posts},null,8,["posts"])])):((0,r.wg)(),(0,r.iD)("div",b,[(0,r.Wm)(u)]))])}var k=o(4870),_=o(1509);o(9786),o(476);const T={apiKey:"AIzaSyAfAdJa0TnQe95YNI5mDTuqSQPIWErl4EE",authDomain:"yousef-firebase-ae727.firebaseapp.com",projectId:"yousef-firebase-ae727",storageBucket:"yousef-firebase-ae727.appspot.com",messagingSenderId:"805319693962",appId:"1:805319693962:web:90d5e2ae6e3d97d0a17f73"};_.Z.initializeApp(T);const S=_.Z.firestore(),W=_.Z.firestore.FieldValue.serverTimestamp,H=()=>{const t=(0,k.iH)([]),e=(0,k.iH)(null),o=async()=>{try{const e=await S.collection("posts").orderBy("createdAt","desc").get();t.value=e.docs.map((t=>({...t.data(),id:t.id})))}catch(o){e.value=o.message}};return{posts:t,error:e,load:o}};var j=H;const C={class:"post-list"};function O(t,e,o,n,s,a){const i=(0,r.up)("SinglePost");return(0,r.wg)(),(0,r.iD)("div",C,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.posts,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id},[(0,r.Wm)(i,{post:t},null,8,["post"])])))),128))])}const P={class:"post"};function Z(t,e,o,n,s,a){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",P,[(0,r.Wm)(i,{to:{name:"Details",params:{id:o.post.id}}},{default:(0,r.w5)((()=>[(0,r._)("h3",null,(0,m.zw)(o.post.title),1)])),_:1},8,["to"]),(0,r._)("p",null,(0,m.zw)(n.snippet),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.post.tags,(t=>((0,r.wg)(),(0,r.iD)("span",{key:t},[(0,r.Wm)(i,{to:{name:"Tags",params:{tag:t}}},{default:(0,r.w5)((()=>[(0,r.Uk)("#"+(0,m.zw)(t),1)])),_:2},1032,["to"])])))),128))])}var z={props:["post"],setup(t){const e=(0,r.Fl)((()=>t.post.body.substring(0,100)+"..."));return{snippet:e}}};const x=(0,u.Z)(z,[["render",Z]]);var K=x,A={props:["posts"],components:{SinglePost:K},setup(){}};const E=(0,u.Z)(A,[["render",O]]);var I=E;const U={class:"spinner"};function Y(t,e){return(0,r.wg)(),(0,r.iD)("div",U)}const q={},M=(0,u.Z)(q,[["render",Y]]);var F=M;const L={class:"tag-cloud"},V=(0,r._)("h3",null,"Tags",-1);function B(t,e,o,n,s,a){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",L,[V,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.tags,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t},[(0,r.Wm)(i,{to:{name:"Tags",params:{tag:t}}},{default:(0,r.w5)((()=>[(0,r.Uk)(" #"+(0,m.zw)(t),1)])),_:2},1032,["to"])])))),128))])}const N=t=>{const e=(0,k.iH)([]),o=new Set;return t.forEach((t=>{t.tags.forEach((t=>o.add(t)))})),e.value=[...o],{tags:e}};var Q=N,J={setup(t){const{tags:e}=Q(t.posts);return{tags:e}},props:["posts"]};const G=(0,u.Z)(J,[["render",B]]);var R=G,X={name:"Home",components:{PostList:I,Spinner:F,TagCloud:R},setup(){const{posts:t,error:e,load:o}=j();return(0,r.bv)((()=>{o()})),{posts:t,error:e}}};const $=(0,u.Z)(X,[["render",D]]);var tt=$;const et={key:0},ot={key:1,class:"post"},nt={class:"pre"},rt={key:2};function st(t,e,o,n,s,a){const i=(0,r.up)("Spinner");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n.error?((0,r.wg)(),(0,r.iD)("div",et,(0,m.zw)(n.error),1)):(0,r.kq)("",!0),n.post?((0,r.wg)(),(0,r.iD)("div",ot,[(0,r._)("h3",null,(0,m.zw)(n.post.title),1),(0,r._)("p",nt,(0,m.zw)(n.post.body),1),(0,r._)("button",{onClick:e[0]||(e[0]=(...t)=>n.handleClick&&n.handleClick(...t))},"Delete post")])):((0,r.wg)(),(0,r.iD)("div",rt,[(0,r.Wm)(i)]))],64)}o(560);let at=t=>{let e=(0,k.iH)(null),o=(0,k.iH)(null),n=async()=>{try{let o=await S.collection("posts").doc(t).get();if(!o.exists)throw Error("this post does not exist");e.value={...o.data(),id:t},console.log(e.value)}catch(n){o.value=n.message}};return{post:e,error:o,load:n}};var it=at,lt={props:["id"],components:{Spinner:F},setup(t){const e=(0,f.yj)(),o=(0,f.tv)(),{post:n,error:r,load:s}=it(e.params.id);let a=async()=>{await S.collection("posts").doc(t.id).delete(),o.push("/")};return s(),{post:n,error:r,load:s,handleClick:a}}};const ut=(0,u.Z)(lt,[["render",st],["__scopeId","data-v-f269e0da"]]);var pt=ut;const ct={class:"create"},dt=(0,r._)("label",null,"Title:",-1),gt=(0,r._)("label",null,"Content:",-1),vt=(0,r._)("label",null,"Tags (hit enter to add a tag):",-1),ft=(0,r._)("button",null,"Add Post",-1);function mt(t,e,o,s,a,i){return(0,r.wg)(),(0,r.iD)("div",ct,[(0,r._)("form",{onSubmit:e[4]||(e[4]=(0,n.iM)(((...t)=>s.add&&s.add(...t)),["prevent"]))},[dt,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.title=t),type:"text",required:""},null,512),[[n.nr,s.title]]),gt,(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.body=t),required:""},null,512),[[n.nr,s.body]]),vt,(0,r.wy)((0,r._)("input",{onKeydown:e[2]||(e[2]=(0,n.D2)((0,n.iM)(((...t)=>s.handleKeydown&&s.handleKeydown(...t)),["prevent"]),["enter"])),"onUpdate:modelValue":e[3]||(e[3]=t=>s.tag=t),type:"text"},null,544),[[n.nr,s.tag]]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.tags,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"pill"},"#"+(0,m.zw)(t),1)))),128)),ft],32)])}var wt={setup(){const t=(0,k.iH)(""),e=(0,k.iH)(""),o=(0,k.iH)([]),n=(0,k.iH)(""),r=(0,f.tv)(),s=()=>{n.value.length&&(o.value.includes(n.value)||(n.value=n.value.replace(/\s/g,""),o.value.push(n.value)),n.value="")},a=async()=>{const n={title:t.value,body:e.value,tags:o.value,createdAt:W()};await S.collection("posts").add(n),r.push("/")};return{body:e,title:t,tags:o,tag:n,handleKeydown:s,add:a}}};const yt=(0,u.Z)(wt,[["render",mt]]);var ht=yt;const bt={class:"tag"},Dt={key:0},kt={key:1,class:"layout"},_t={key:2};function Tt(t,e,o,n,s,a){const i=(0,r.up)("PostList"),l=(0,r.up)("TagCloud"),u=(0,r.up)("Spinner");return(0,r.wg)(),(0,r.iD)("div",bt,[n.error?((0,r.wg)(),(0,r.iD)("div",Dt,(0,m.zw)(n.error),1)):(0,r.kq)("",!0),n.posts.length?((0,r.wg)(),(0,r.iD)("div",kt,[(0,r.Wm)(i,{posts:n.postsWithTag},null,8,["posts"]),(0,r.Wm)(l,{posts:n.posts},null,8,["posts"])])):((0,r.wg)(),(0,r.iD)("div",_t,[(0,r.Wm)(u)]))])}var St={components:{PostList:I,Spinner:F,TagCloud:R},setup(){const t=(0,f.yj)(),{posts:e,error:o,load:n}=j();n();const s=(0,r.Fl)((()=>e.value.filter((e=>e.tags.includes(t.params.tag)))));return{error:o,posts:e,postsWithTag:s}}};const Wt=(0,u.Z)(St,[["render",Tt]]);var Ht=Wt;const jt=[{path:"/",name:"home",component:tt},{path:"/details/:id",name:"Details",component:pt,props:!0},{path:"/create",name:"Create",component:ht},{path:"/tags/:tag",name:"Tags",component:Ht,props:!0}],Ct=(0,f.p7)({history:(0,f.PO)("/"),routes:jt});var Ot=Ct;(0,n.ri)(v).use(Ot).mount("#app")}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,n,r,s){if(!n){var a=1/0;for(p=0;p<t.length;p++){n=t[p][0],r=t[p][1],s=t[p][2];for(var i=!0,l=0;l<n.length;l++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](n[l])}))?n.splice(l--,1):(i=!1,s<a&&(a=s));if(i){t.splice(p--,1);var u=r();void 0!==u&&(e=u)}}return e}s=s||0;for(var p=t.length;p>0&&t[p-1][2]>s;p--)t[p]=t[p-1];t[p]=[n,r,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,s,a=n[0],i=n[1],l=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var p=l(o)}for(e&&e(n);u<a.length;u++)s=a[u],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(p)},n=self["webpackChunkdojo_blog"]=self["webpackChunkdojo_blog"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(1649)}));n=o.O(n)})();
//# sourceMappingURL=app.f57cdd4f.js.map